---
name: forward_bot
context_variables:

  started: 
    type: flag
    init: false
  informed: 
    type: flag
    init: false
  proceed_flag: 
    type: flag
    init: false

  request_emergency_help: 
    type: flag 
    init: false

  fire_type:
    type: enum
    known: 
      type: fflag 
      init: false 
    options: 
      - yellow 
      - red
    
  reset:
    type: flag
    init: false

  goal:
    type: flag
    init: false
    known:
      type: flag
      init: false
 
intents:
  confirm:
    utterances:
      - "yes" 
      - yeah 
      - yup
      - affirmative
      - aye
  
  deny: 
    utterances:
      - "no"
      - nah 
      - negative 
      - not at all 
      - not really 

  share-fire_type: 
    entities: 
      - fire_type
    utterances:
      - I have $fire_type
      - $fire_type
      - I am dealing with $fire_type

actions: 
  # say-hi: 
  #   type: dialogue
  #   message_variants:
  #     -Waiting for button ppess 
  #   condition: 
  #     started: 
  #       value: false 
  #   effect:
  #     set-say-hi:
  #       oneof:
  #         outcomes:
  #           update-started:
  #             updates:
  #               started:
  #                 value: true 



  get-fire_information-one: 
    type: dialogue
    subtype: custom
    message_variants:
      - See what this does right? 
    condition:
      fire_type:
        known: false 

    
    effect: 
      set-emergency_type:
        oneof:
          outcomes: 
            update-proceed_flag:
              updates:
                proceed_flag:
                  value: true 
            update-engine_fire: 
              updates: 
                proceed_flag:
                  value: true
              intent: confirm


  get-fire_information: 
    type: dialogue
    subtype: custom
    message_variants:
      - Do you want to end the program? 
    condition:
      request_emergency_help:
        value: false 
      fire_type:
        known: false 
      proceed_flag:
        value: false
    
    effect: 
      set-emergency_type:
        oneof:
          outcomes: 
            update-proceed_flag:
              updates:
                proceed_flag:
                  value: true 
            update-engine_fire: 
              updates: 
                proceed_flag:
                  value: true
              intent: confirm
              #   request_emergency_help:
              #     value: true
              #   fire_type:
              #     known: maybe
              # intent: share-fire_type

  # confirm-fire_information: 
  #   type: dialogue
  #   message_variants:
  #     - Can you please confirm that your engine is on fire? 
  #   condition:
  #     request_emergency_help:
  #       value: true 
  #     fire_type:
  #       known: maybe 

    
  #   effect: 
  #     set-emergency_type:
  #       oneof:
  #         outcomes: 
  #           update-proceed_flag:
  #             updates:
  #               reset:
  #                 value: true
  #             intent: deny 
  #           update-engine_fire: 
  #             updates: 
  #               fire_type:
  #                 known: true
  #               proceed_flag:
  #                 value: true
  #             intent: confirm
    
  reset-convo:
    type: system 
    subtype: Context dependent determination
    condition:
      reset:
        value: true 
    
    effect:
      reset-convo:
        oneof: 
          outcomes:
            update-proceed_flag: 
              updates: 
                proceed_flag:
                  value: false
                request_emergency_help:
                  value: false 
                fire_type: 
                  value: false
          



  
  set-informed:
    type: dialogue 
    message_variants:
      - This means, you will proceed. Are you sure? 
    condition:
      proceed_flag:
        value: true 
    effect:
      set-informed:
        oneof: 
          outcomes:
            update-informed:
              updates:
                informed:
                  value: true
              intent: confirm 

    


  complete:
    type: system
    condition:
      # request_emergency_help:
      #   known: true
      informed: 
        value: true
    effect:
      finish:
        oneof:
          outcomes:
            finish:
              updates:
                goal:
                  value: true

                
      