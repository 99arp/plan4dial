---
name: frico_fire
context_variables:
  

  request_emergency_help: 
    type: flag 
    init: false
    known:
      type: fflag
      init: false

  fire_type:
    type: enum
    known: 
      type: fflag 
      init: false 
    options: 
      - engine fire 
      - electric fire 

  request_engine_fire_help: 
    type: flag 
    init: false 
    known: 
      type: flag 
      init: false 
  
  request_electric_fire_help: 
    type: flag 
    init: false 
    known: 
      type: flag 
      init: false 


  informed: 
    type: flag
    init: false


  instrument_fire_enum: 
    type: enum  
    known:
      type: fflag
      init: false
    options: 
      - Radio 
      - Screen

  electrical_fire:
    type: flag
    init: false
    known:
      type: flag
      init: false
  
  fire_color: 
    type: enum  

    known:
      type: flag 
      init: false 
    options: 
      - red 
      - orange

  goal:
    type: flag
    init: false
    known:
      type: flag
      init: false
 
intents: 
  confirm:
    utterances:
      - "yes" 
      - yeah 
      - yup
      - affirmative
      - aye
  
  deny: 
    utterances:
      - "no"
      - nah 
      - negative 
      - not at all 
      - not really 
      

  
  share-generic_fire_emergency: 
    utterances:
      - The plane is on fire
      - I see smoke 
      - I can smell smoke 
      - It looks like there is fire
      - It seems the plane has caught fire
  
  share-engine_fire_emergency:
    utterances:
      - I see smokes coming out of my engine
      - My engine is burning
      - I see fire coming from my engine
      - I think my engine has caught fire
      - My engine is on fire

  share-electric_fire_emergency:
    entities:
      - instrument_fire_enum 

    utterances:
      - My $instrument_fire_enum is catching electric fire
      - Help me god, my $instrument_fire_enum is burning
      - My $instrument_fire_enum is burning



  share-engine_fire_with_color: 
    entities:
      - fire_color
    utterances:
      - A $fire_color fire is burning in the engine
      - I can see a $fire_color colored fire 

  share-fire_type: 
    entities: 
      - fire_type
    utterances:
      - I have $fire_type
      - $fire_type
      - I am dealing with $fire_type
  

  share-all_good: 
    
    utterances:
      - Nah its all good 
      - all good in the hood
      - Everything is alright 
      - Theres no problem 
      - It looks clean
      
      

actions: 
  

  get-initial_help_request: 
    type: dialogue
    message_variants:
      - What can I help you with today?

    fallback_message_variants:
      - Can you please repeat that? 

    condition:
      request_emergency_help:
        known: false
        value: false 
    effect: 
      set-emergency_help_type: 
        oneof:
          outcomes: 
            
            update-generic_fire_emergency: 
              updates: 
                request_emergency_help:
                  known: maybe 
                  value: true
              intent: share-generic_fire_emergency
              response_variants:
                - I am here to assist you. Please provide me with further information


            update-engine_fire_emergency: 
              updates: 
                informed: 
                  value: true                
                request_engine_fire_help:
                  known: true 
                  value: true 
                request_emergency_help:
                  known: true
              intent: share-engine_fire_emergency
              response_variants:
                - Good speed captain 
            
            update-electric_fire_emergency: 
              updates: 
                informed: 
                  value: true
                request_electric_fire_help:
                  known: true 
                  value: true
                request_emergency_help:
                  known: true
                    
              intent: share-electric_fire_emergency
              response_variants:
                - It was nice knowing you 

            update-no_its_good: 
              updates: 
                informed: 
                  value: true
                request_emergency_help: # This works for now, I will
                  value: false
                  known: true 

              intent: deny
              response_variants:
                - "whatever yo"
  
  get-fire_information: 
    type: dialogue
    message_variants:
      - What kind of fire is it? 
    condition:
      request_emergency_help:
        known: maybe 
        value: true 
      fire_type:
        known: false 
    
    effect: 
      set-emergency_type:
        oneof:
          outcomes: 
            update-engine_fire: 
              updates: 
                request_emergency_help:
                  known: true
                fire_type:
                  known: true
                  value: $fire_type
              intent: share-fire_type
  
  get-fire_color_information: 
    type: dialogue 
    message_variants: 
    - so your engine is on fire? What color is the fire?
    condition: 
      request_emergency_help:
        known: true 
        value: true 
      fire_type:
        known: true 
        # value: engine fire 
    effect: 
      set-fire_color:
        oneof:
          outcomes:
            update-fire_color: 
              updates: 
                informed: 
                  value: true 
                fire_color: 
                  known: true
                  value: $fire_color 
              intent:  share-engine_fire_with_color
              response_variants:
                - If the fire color is $fire_color you might as well curl up in a ball. 

    # inform-electric_fire_procedure: 
    #   type: dialogue
    #   message_variants:
    #     - So your $instrument is catching fire. Pull the plug 
      
    #   condition:
    #     request_emergency_help:
    #       known: true 
    #     request_electric_fire_help:
    #       known: true 
    #       value: true 
    #   effect:
    #     inform-procedure: 
    #       oneof: 
    #         outcomes: 
    #           updates: 
    #             informed: 
    #               value: true 


    

  # get-fire_type: 
  #   type: dialogue
  #   message_variants: 
  #     - "What kind of fire emergency is this yadfo?"
  #   condition:
  #     request_emergency_help:
  #       value: true
  #       known: true 
  #     fire_type: 
  #       known: false 
  #   effect: 
  #     set-fire_type:
  #       oneof:
  #         outcomes:
  #           update-fire_type_true: 
  #             updates:
  #               fire_type: 
  #                 value: $fire_type
  #                 known: true
  #             intent: confirm 
  #             # follow_up: get-fire_type 


  #           update-fire_type_false: 
  #             updates: 
  #               fire_type:
  #                 value: false
  #                 known: true
  #             intent: deny
  #         response_variants:
  #           "Damn that shit is heavy"

  complete:
    type: system
    condition:
      # request_emergency_help:
      #   known: true
      informed: 
        value: true
    effect:
      finish:
        oneof:
          outcomes:
            finish:
              updates:
                goal:
                  value: true

                
      